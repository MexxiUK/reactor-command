<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atomic Tycoon v1.1.3 - System Integrity</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body class="bg-gray-900 text-gray-300 font-mono p-4 md:p-8 select-none overflow-x-hidden">
    <div class="scanline"></div>

    <!-- Help Button -->
    <a href="manual.html" target="_blank"
        class="fixed top-4 right-4 w-8 h-8 rounded-full border border-gray-600 bg-gray-900 text-gray-400 hover:text-emerald-400 hover:border-emerald-400 hover:shadow-[0_0_10px_rgba(52,211,153,0.5)] flex items-center justify-center font-bold transition-all z-50 text-sm"
        title="Operator Handbook">?</a>

    <div class="max-w-6xl mx-auto">
        <!-- HEADER STATS -->
        <header
            class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8 bg-gray-900/80 p-6 rounded-lg border border-gray-700 relative">

            <!-- Action Buttons Row (Top-Right of Header) -->
            <div class="absolute top-2 right-2 flex gap-2 z-10">
                <button id="prestige-btn" onclick="openPrestigeModal()"
                    class="px-2 py-1 rounded border border-yellow-600 bg-gray-900/90 text-yellow-400 hover:bg-yellow-900/30 hover:shadow-[0_0_8px_rgba(250,204,21,0.3)] text-[10px] font-bold uppercase tracking-wider transition-all hidden"
                    title="Go Public">‚≠ê Prestige</button>
                <button onclick="openResearchModal()"
                    class="px-2 py-1 rounded border border-cyan-700 bg-gray-900/90 text-cyan-400 hover:bg-cyan-900/30 hover:shadow-[0_0_8px_rgba(34,211,238,0.3)] text-[10px] font-bold uppercase tracking-wider transition-all"
                    title="Research Lab">üî¨ Research</button>
            </div>
            <div class="text-center md:text-left">
                <p class="text-[9px] uppercase text-gray-500 tracking-widest">Capital Reserve</p>
                <h2 class="text-3xl font-bold text-emerald-400">$<span id="cash-display">0</span></h2>
            </div>
            <div class="text-center">
                <p class="text-[9px] uppercase text-gray-500 tracking-widest">Net Revenue</p>
                <h2 class="text-2xl font-bold text-blue-400">$<span id="income-display">0</span><span
                        class="text-sm">/s</span></h2>
                <div id="efficiency-tag"
                    class="text-[8px] font-bold text-emerald-500 bg-emerald-950/30 px-2 py-0.5 rounded-full inline-block mt-1 uppercase tracking-widest">
                    Efficiency: 100%</div>
            </div>
            <!-- Global Grid Load (Consolidated) -->
            <div class="text-center">
                <div class="flex flex-col items-center">
                    <p class="text-[9px] uppercase text-gray-500 tracking-widest mb-1">Grid Market</p>
                    <div class="flex items-center gap-2">
                        <h2 class="text-2xl font-bold text-orange-400">$<span id="export-display">0</span><span
                                class="text-sm">/s</span></h2>
                        <div id="market-trend-arrow" class="text-xl font-bold text-gray-600">--</div>
                    </div>
                    <div class="text-[9px] uppercase tracking-tighter flex gap-3 mt-1">
                        <span class="text-gray-500">Price: <span id="market-price"
                                class="text-gray-300 font-bold">$0.10</span>/MW</span>
                    </div>
                    <!-- Sparkline Container -->
                    <div class="w-24 h-6 bg-gray-900/50 mt-1 border border-gray-800 relative overflow-hidden flex items-end gap-[1px]"
                        id="market-sparkline"></div>
                    <!-- News Ticker -->
                    <div class="w-48 overflow-hidden whitespace-nowrap mt-1 relative">
                        <div id="market-news"
                            class="text-[8px] text-gray-500 font-bold uppercase tracking-widest inline-block animate-marquee pl-48">
                            Initializing...</div>
                    </div>
                </div>
            </div>
            <div class="text-center md:text-right">
                <p class="text-[9px] uppercase text-gray-500 tracking-widest">Global Grid Load</p>
                <h2 class="text-2xl font-bold"><span id="power-used">0</span> / <span id="power-total">0</span> <span
                        class="text-sm text-gray-500">MW</span></h2>
                <div id="stability-indicator" class="text-[10px] uppercase text-emerald-500 font-bold tracking-widest">
                    System Stable</div>
            </div>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-12 gap-6">

            <!-- LEFT COLUMN -->
            <div class="lg:col-span-4 space-y-6">
                <h3
                    class="text-lg font-bold border-b border-gray-700 pb-2 flex items-center uppercase tracking-tighter">
                    <span class="mr-2">üèôÔ∏è</span> City Expansion
                </h3>

                <div id="build-list" class="space-y-3">
                    <div id="btn-house" onclick="buyBuilding('house')"
                        class="building-card p-3 rounded-md cursor-pointer flex items-center gap-4 transition-all">
                        <div class="icon-container text-emerald-500"><svg class="w-6 h-6" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            </svg></div>
                        <div class="flex-grow">
                            <div class="flex justify-between items-start">
                                <h4 class="font-bold text-emerald-400 text-[11px] uppercase">Housing</h4>
                                <span class="text-[11px] font-bold">$<span id="cost-house">100</span></span>
                            </div>
                            <p class="text-[9px] text-gray-500">1 MW | $2/s ‚Ä¢ <span id="count-house">0</span> Units</p>
                        </div>
                    </div>

                    <div id="btn-factory" onclick="buyBuilding('factory')"
                        class="building-card p-3 rounded-md cursor-pointer disabled-milestone flex items-center gap-4 transition-all">
                        <div class="icon-container text-blue-500"><svg class="w-6 h-6" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <path d="M2 20V4l7 5V4l7 5V4l6 4v12H2Z"></path>
                            </svg></div>
                        <div class="flex-grow">
                            <div class="flex justify-between items-start">
                                <h4 class="font-bold text-blue-400 text-[11px] uppercase tracking-tighter">Industrial
                                </h4>
                                <span class="text-[11px] font-bold">$<span id="cost-factory">25k</span></span>
                            </div>
                            <p class="text-[9px] text-gray-500" id="factory-desc">25 MW | $150/s ‚Ä¢ <span
                                    id="count-factory">0</span> Units</p>
                        </div>
                    </div>

                    <div id="btn-datacenter" onclick="buyBuilding('datacenter')"
                        class="building-card p-3 rounded-md cursor-pointer disabled-milestone flex items-center gap-4 transition-all">
                        <div class="icon-container text-purple-500"><svg class="w-6 h-6" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <rect x="2" y="2" width="20" height="20" rx="2" />
                                <path d="M6 6h12M6 12h12M6 18h12" />
                            </svg></div>
                        <div class="flex-grow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 id="dc-title-label"
                                        class="font-bold text-purple-400 text-[11px] uppercase tracking-tighter">Data
                                        Center</h4>
                                    <p class="text-[10px] text-gray-400"><span id="dc-demand-label">200</span> MW |
                                        $<span id="dc-revenue-label">2.5k</span>/s</p>
                                </div>
                                <span class="text-[11px] font-bold">$<span id="cost-datacenter">1.5M</span></span>
                            </div>
                            <p class="text-[9px] text-gray-500" id="datacenter-desc"><span
                                    id="count-datacenter">0</span>
                                Units</p>
                        </div>
                    </div>

                    <div id="btn-skyscraper" onclick="buyBuilding('skyscraper')"
                        class="building-card p-3 rounded-md cursor-pointer disabled-milestone flex items-center gap-4 transition-all">
                        <div class="icon-container text-cyan-400"><svg class="w-6 h-6" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <path d="M3 21h18M5 21V3l14 0v18M9 7h1M9 11h1M9 15h1M14 7h1M14 11h1M14 15h1" />
                            </svg></div>
                        <div class="flex-grow">
                            <div class="flex justify-between items-start">
                                <h4 class="font-bold text-cyan-400 text-[11px] uppercase tracking-tighter">Commercial
                                    Hub</h4>
                                <span class="text-[11px] font-bold">$<span id="cost-skyscraper">50M</span></span>
                            </div>
                            <p class="text-[9px] text-gray-500" id="skyscraper-desc">1k MW | $25k/s ‚Ä¢ <span
                                    id="count-skyscraper">0</span> Units</p>
                        </div>
                    </div>

                    <div id="btn-battery" onclick="buyBuilding('battery')"
                        class="building-card p-3 rounded-md cursor-pointer flex items-center gap-4 transition-all hidden">
                        <div class="icon-container text-yellow-500"><svg class="w-6 h-6" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <rect x="2" y="7" width="16" height="10" rx="2" ry="2"></rect>
                                <line x1="22" y1="11" x2="22" y2="13"></line>
                            </svg></div>
                        <div class="flex-grow">
                            <div class="flex justify-between items-start">
                                <h4 class="font-bold text-yellow-500 text-[11px] uppercase tracking-tighter">Grid
                                    Battery
                                </h4>
                                <span class="text-[11px] font-bold">$<span id="cost-battery">50k</span></span>
                            </div>
                            <p class="text-[9px] text-gray-500">Stores Excess Power ‚Ä¢ <span id="count-battery">0</span>
                                Units</p>
                        </div>
                    </div>
                </div>

                <div class="bg-gray-900/50 p-4 border border-gray-800 rounded-md">
                    <div class="flex justify-between items-center mb-3">
                        <h4 class="text-xs font-bold text-gray-500 uppercase tracking-widest">üõ°Ô∏è PERSONNEL</h4>
                        <span class="text-[10px] font-bold text-gray-600"><span id="manager-count">0</span>/4</span>
                    </div>
                    <div id="manager-slots" class="grid grid-cols-2 gap-2"></div>
                </div>

                <div class="bg-gray-900/50 p-4 border border-gray-800 rounded-md">
                    <div class="flex justify-between items-center mb-2">
                        <h4 class="text-xs font-bold text-gray-500 uppercase tracking-widest">District Monitor</h4>
                        <button onclick="buyLand()" id="btn-buy-land"
                            class="text-[9px] bg-blue-900/20 border border-blue-800 px-2 py-0.5 rounded text-blue-400 hover:bg-blue-800/40 transition-all font-bold">EXPAND
                            (+100 Slots) $<span id="land-cost">10k</span></button>
                    </div>
                    <div id="city-visual-grid" class="flex flex-wrap gap-1 max-h-[160px] overflow-y-auto pr-1"></div>
                </div>

                <!-- Grid Storage Monitor (Left Column) -->
                <div id="grid-storage-monitor" class="bg-gray-900/50 p-4 border border-gray-800 rounded-md hidden">
                    <div class="flex justify-between items-center mb-2">
                        <h4 class="text-xs font-bold text-gray-500 uppercase tracking-widest">Grid Storage</h4>
                        <span class="text-[9px] font-bold text-yellow-500 font-mono" id="battery-text">0%</span>
                    </div>
                    <!-- Battery Charge Bar -->
                    <div
                        class="w-full bg-gray-800 h-2 mt-1 rounded-full overflow-hidden relative border border-gray-700">
                        <div id="battery-fill" class="h-full bg-yellow-500 w-0 transition-all duration-300"></div>
                    </div>

                    <div class="mt-3">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-[8px] text-gray-400 font-bold uppercase tracking-wider">Charge
                                Priority</span>
                            <span class="text-[8px] text-emerald-400 font-mono font-bold"
                                id="charge-rate-display">100%</span>
                        </div>
                        <input type="range" id="battery-slider" min="0" max="100" value="100"
                            class="w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-emerald-500 hover:accent-emerald-400"
                            oninput="updateBatteryRate(this.value)">
                    </div>

                    <p class="text-[8px] text-gray-500 mt-2 text-center">Buffer Capacity: 2000 MWs / Unit</p>
                </div>
            </div>

            <!-- RIGHT COLUMN -->
            <div class="lg:col-span-8 space-y-6">
                <div class="flex justify-between items-center border-b border-gray-700 pb-2">
                    <h3 class="text-lg font-bold flex items-center uppercase tracking-tighter">
                        <span class="mr-2 text-xl">‚ò¢Ô∏è</span> Reactor Command
                    </h3>
                    <button id="master-ovr-btn"
                        class="hidden master-ovr-btn px-4 py-1 text-[9px] font-bold border border-gray-600 bg-gray-800 text-gray-400 rounded hover:border-red-500 transition-all uppercase tracking-widest">
                        HOLD MASTER OVR
                    </button>
                </div>

                <div id="reactor-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Dynamic Units and Buy card appear here -->
                </div>

                <!-- UPGRADE TRAY (DEPRECATED: Replaced by Research Tree) -->
                <div id="upgrade-tray-container"
                    class="bg-gray-900/40 border border-gray-800 p-4 rounded-lg mt-8 shadow-inner hidden">
                    <h4 class="text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-3 flex items-center">
                        <span class="mr-2 text-blue-500">‚öôÔ∏è</span> STRATEGIC UPGRADES & MODIFIERS
                    </h4>
                    <div id="upgrade-tray" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <!-- Upgrades sorted: Available -> Expensive -> Installed -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- DEBUG CONSOLE -->
    <div id="debug-panel">
        <div class="max-w-6xl mx-auto flex gap-4 items-center flex-wrap">
            <span class="text-red-500 font-bold uppercase">Superintendent Access:</span>
            <button onclick="state.cash += 100000000; refreshStaticUI();"
                class="bg-gray-800 px-2 py-1 rounded border border-gray-600 hover:bg-gray-700">+$100M Cash</button>
            <button onclick="debugInstantResearch()"
                class="bg-gray-800 px-2 py-1 rounded border border-gray-600 hover:bg-gray-700">Max Research</button>
            <button onclick="state.reactors.forEach(r => r.heat = 0)"
                class="bg-gray-800 px-2 py-1 rounded border border-gray-600 hover:bg-gray-700">Reset Heat</button>
            <button id="btn-ff" onclick="debugToggleFF()"
                class="bg-gray-800 px-2 py-1 rounded border border-gray-600 hover:bg-gray-700">FF Toggle (OFF)</button>
            <button onclick="toggleDebug()"
                class="bg-red-900/40 px-2 py-1 rounded border border-red-500 text-red-500 ml-auto">CLOSE
                CONSOLE</button>
        </div>
    </div>

    <!-- CONTRACTS MODAL -->
    <div id="contracts-modal" class="modal-overlay">
        <div class="modal-box border-yellow-500 max-w-[800px] w-full">
            <span class="modal-close" onclick="toggleContractsModal()">[CLOSE]</span>
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold text-yellow-500 uppercase tracking-widest">Available Contracts</h2>
                <div class="text-xs text-gray-400 font-bold uppercase tracking-widest">Corp Rep: <span
                        id="corp-rep-display" class="text-white">0</span></div>
            </div>

            <div id="contracts-list" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <!-- Contract Cards -->
            </div>

            <p class="text-[10px] text-gray-500 text-center font-bold uppercase tracking-widest">Warning: Failure to
                meet contract terms may result in penalty.</p>
        </div>
    </div>

    <!-- ACTIVE CONTRACT HUD -->
    <div id="contract-hud"
        class="hidden fixed top-24 right-4 w-64 bg-gray-900/90 border border-yellow-500/50 p-4 rounded shadow-lg z-40">
        <div class="flex justify-between items-start mb-2">
            <h4 class="text-[10px] font-bold text-yellow-500 uppercase tracking-tighter">Active Contract</h4>
            <span id="contract-timer" class="text-sm font-bold text-white font-mono">00:00</span>
        </div>
        <div id="contract-title" class="text-xs font-bold text-white uppercase tracking-widest mb-3">Unknown</div>
        <div class="space-y-2">
            <div class="flex justify-between text-[10px] font-bold text-gray-400 uppercase">
                <span>Progress</span>
                <span id="contract-status-text">--/--</span>
            </div>
            <div class="w-full bg-gray-800 h-1.5 rounded-full overflow-hidden">
                <div id="contract-progress-bar" class="bg-yellow-500 h-full w-0 transition-all duration-300"></div>
            </div>
            <p id="contract-desc-hud" class="text-[9px] text-gray-500 leading-tight mt-1"></p>
        </div>
    </div>

    <!-- DATA MODAL -->
    <div id="data-modal" class="modal-overlay">
        <div class="modal-box border-blue-500">
            <span class="modal-close" onclick="toggleDataModal()">[CLOSE]</span>
            <h2 class="text-xl font-bold text-blue-400 mb-4 uppercase tracking-widest">Data Management</h2>

            <div class="space-y-4">
                <div>
                    <label class="text-xs uppercase font-bold text-gray-500">Export Save</label>
                    <button onclick="exportSave()"
                        class="w-full py-2 bg-blue-900/20 border border-blue-800 text-blue-400 text-xs font-bold uppercase hover:bg-blue-800/40 mt-1">Copy
                        Save String to Clipboard</button>
                </div>

                <div>
                    <label class="text-xs uppercase font-bold text-gray-500">Import Save</label>
                    <textarea id="import-area" class="save-string" placeholder="Paste save string here..."></textarea>
                    <button onclick="importSave()"
                        class="w-full py-2 bg-emerald-900/20 border border-emerald-800 text-emerald-400 text-xs font-bold uppercase hover:bg-emerald-800/40">Import
                        Data</button>
                </div>

                <div class="pt-4 border-t border-gray-800">
                    <button onclick="hardReset()"
                        class="w-full py-2 bg-red-900/20 border border-red-800 text-red-500 text-xs font-bold uppercase hover:bg-red-800/40">HARD
                        RESET (WIPE SAVE)</button>
                </div>
            </div>
        </div>
    </div>

    <!-- OFFLINE MODAL -->
    <div id="offline-modal" class="modal-overlay">
        <div class="modal-box border-emerald-500">
            <h2 class="text-xl font-bold text-emerald-400 mb-2 uppercase tracking-widest">System Report</h2>
            <p class="text-xs text-gray-400 mb-6">Automated systems continued operation during absence.</p>

            <div class="bg-gray-900 p-4 rounded border border-gray-700 mb-6 text-center">
                <div class="text-[9px] uppercase text-gray-500 tracking-widest">Offline Revenue Generated</div>
                <div class="text-3xl font-bold text-emerald-400">$<span id="offline-cash">0</span></div>
                <div class="text-[9px] uppercase text-gray-600 mt-2 tracking-tighter">Efficiency Rating: 50%</div>
                <div class="text-[9px] uppercase text-gray-600 tracking-tighter">Duration: <span
                        id="offline-time">0s</span></div>
            </div>

            <button onclick="closeOfflineModal()"
                class="w-full py-3 bg-emerald-600 text-white font-bold uppercase tracking-widest hover:bg-emerald-500">Acknowledge
                & Resume</button>
        </div>
    </div>

    <div class="fixed bottom-4 right-4 z-[99] flex gap-2">
        <button onclick="toggleContractsModal()" id="btn-contracts-open"
            class="bg-yellow-900/20 border border-yellow-900 text-yellow-500 hover:bg-yellow-900/40 text-[8px] px-2 py-1 rounded uppercase tracking-widest font-bold">Contracts</button>
        <button onclick="toggleDataModal()"
            class="bg-blue-900/20 border border-blue-900 text-blue-400 hover:text-blue-300 hover:border-blue-500 text-[8px] px-2 py-1 rounded uppercase tracking-widest">Data
            / Save</button>
        <button id="btn-debug-access" onclick="toggleDebug()"
            class="bg-red-900/20 border border-red-900 text-red-900 hover:text-red-500 hover:border-red-500 text-[8px] px-2 py-1 rounded uppercase tracking-widest">Debug
            Access</button>
    </div>

    <template id="reactor-template">
        <div
            class="reactor-unit p-4 bg-gray-900/80 border border-gray-700 rounded-lg relative overflow-hidden transition-all reactor-card-fixed">
            <div class="flex justify-between mb-2">
                <span class="text-xs font-bold text-gray-500 uppercase tracking-tighter">UNIT <span
                        class="u-id">X</span></span>
                <span
                    class="u-gen text-[9px] bg-gray-800 px-2 py-0.5 rounded text-gray-400 font-bold uppercase tracking-widest">GEN
                    II</span>
            </div>
            <div class="mb-4">
                <div class="flex justify-between text-[10px] font-bold mb-1">
                    <span>CORE TEMP: <span class="u-temp-val">0%</span></span>
                    <span class="text-emerald-400 tracking-tighter">STACKED MULT: <span
                            class="u-multiplier-val">1.0x</span></span>
                </div>
                <div class="heat-bar-bg rounded-sm">
                    <div class="heat-zone-marker" style="left: 25%;"></div>
                    <div class="heat-zone-marker" style="left: 50%;"></div>
                    <div class="heat-zone-marker" style="left: 75%;"></div>
                    <div class="heat-bar-fill w-0 zone-tier-1 u-heat-fill"></div>
                </div>
            </div>
            <div class="text-center space-y-3">
                <div class="flex justify-between text-[9px] font-bold text-gray-400 uppercase tracking-widest mb-1">
                    <span>Output: <span class="u-power">0</span> MW</span>
                    <span class="text-blue-400">Share: $<span class="u-rev">0</span>/s</span>
                </div>
                <button
                    class="u-overdrive-btn w-full py-4 bg-gray-800 border border-gray-600 text-[10px] font-bold tracking-tighter hover:bg-gray-700 active:bg-red-950 transition-colors uppercase">Hold
                    to Overdrive</button>
                <button
                    class="u-upgrade-btn w-full py-1 text-[9px] text-emerald-500 border border-emerald-900/50 rounded-sm hover:bg-emerald-900/30 transition-all uppercase disabled:opacity-30">Retrofit
                    Core ($<span class="u-upgrade-cost">5k</span>)</button>
                <button
                    class="u-coolant-btn w-full py-1 text-[9px] text-blue-400 border border-blue-900/50 rounded-sm hover:bg-blue-900/30 transition-all uppercase mt-1 flex items-center justify-center gap-1">
                    <span>‚ùÑÔ∏è</span> VENT HEAT ($<span class="u-coolant-cost">100</span>)
                </button>
            </div>
            <div
                class="u-scram-overlay hidden absolute inset-0 bg-red-950/60 flex flex-col items-center justify-center backdrop-blur-[2px] z-20 text-center">
                <span class="text-white font-bold text-xl tracking-tighter uppercase">Scram Active</span>
                <span class="text-[10px] text-red-200 mt-2 font-bold uppercase text-shadow-sm">Cooling Core...</span>
            </div>
        </div>
    </template>

    <template id="buy-unit-template">
        <div id="add-unit-card" onclick="addReactor()"
            class="p-4 border-2 border-dashed border-gray-700 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-emerald-500 group transition-all reactor-card-fixed">
            <span class="text-4xl text-gray-600 group-hover:text-emerald-500">+</span>
            <span class="text-xs text-gray-500 mt-2 font-bold uppercase tracking-widest">Commission Unit</span>
            <span class="text-[10px] text-emerald-600 font-bold" id="unit-cost-label-dynamic">$5,000</span>
        </div>
    </template>

    <!-- ========== RESEARCH MODAL ========== -->
    <div id="research-modal" class="modal-overlay">
        <div class="modal-box research-modal-box">
            <div class="flex justify-between items-center mb-4 border-b border-gray-700 pb-3">
                <h2 class="text-xl font-bold text-emerald-400 uppercase tracking-widest">Research Lab</h2>
                <button onclick="closeResearchModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <p class="text-gray-500 text-xs mb-4">Unlock technologies to advance your power empire. Click on available
                nodes to research.</p>
            <div class="research-tree-wrapper">
                <svg id="research-lines" class="research-lines-svg"></svg>
                <div id="research-tree-container" class="research-tree-grid"></div>
            </div>
        </div>
    </div>

    <!-- ========== PRESTIGE MODAL ========== -->
    <div id="prestige-modal" class="modal-overlay">
        <div class="modal-box prestige-modal-box">
            <div class="flex justify-between items-center mb-4 border-b border-yellow-700 pb-3">
                <h2 class="text-xl font-bold text-yellow-400 uppercase tracking-widest">‚≠ê Go Public (IPO)</h2>
                <button onclick="closePrestigeModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <p class="text-gray-300 text-sm mb-4">Reset your progress for permanent bonuses. You have reached <span
                    class="text-emerald-400 font-bold">$1 Billion</span>!</p>
            <div class="bg-gray-900/50 p-4 rounded-lg border border-yellow-900/50 mb-4">
                <p class="text-yellow-400 text-lg font-bold">You will earn: <span id="prestige-points-preview"
                        class="text-2xl">1</span> Prestige Points</p>
                <p class="text-gray-500 text-xs mt-1">Prestige Points can be spent on permanent upgrades in the next
                    run.</p>
            </div>
            <div class="flex gap-3">
                <button onclick="closePrestigeModal()"
                    class="flex-1 py-2 border border-gray-600 text-gray-400 rounded-lg hover:bg-gray-800">Cancel</button>
                <button onclick="doPrestige()"
                    class="flex-1 py-2 bg-yellow-600 text-black font-bold rounded-lg hover:bg-yellow-500 uppercase tracking-widest">Prestige
                    Now</button>
            </div>
        </div>
    </div>

    <script src="js/data.js"></script>
    <script src="js/main.js"></script>
</body>

</html>